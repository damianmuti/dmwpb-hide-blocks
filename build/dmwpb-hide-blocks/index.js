(()=>{"use strict";var e={n:o=>{var t=o&&o.__esModule?()=>o.default:()=>o;return e.d(t,{a:t}),t},d:(o,t)=>{for(var r in t)e.o(t,r)&&!e.o(o,r)&&Object.defineProperty(o,r,{enumerable:!0,get:t[r]})},o:(e,o)=>Object.prototype.hasOwnProperty.call(e,o)};const o=window.wp.hooks,t=window.wp.i18n,r=window.wp.compose,c=window.wp.blockEditor,i=window.wp.components,n=window.React;var s,a,l,d,p,m,_;function b(){return b=Object.assign?Object.assign.bind():function(e){for(var o=1;o<arguments.length;o++){var t=arguments[o];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},b.apply(null,arguments)}var h=function(e){return n.createElement("svg",b({xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",id:"icon_svg__Layer_1",x:0,y:0,viewBox:"0 0 1024 1024"},e),s||(s=n.createElement("style",null,".icon_svg__st1{fill:#4b4358}.icon_svg__st4{fill:#f8d9d3}.icon_svg__st5{fill:#fff}")),n.createElement("path",{d:"M496.5 142c147.6-3.9 273.5 102.4 287.9 251.9 2.2 22.5 1.2 45.6 1.2 68.2v92.7c32.3-6.9 41.4-28.7 63.3-34.2 22.6-5.7 45.3 9.3 50.8 31.6 11.2 45.2-39.1 85.5-78.9 94.6-10.1 2.3-20.5 2.9-30.5 5.5l-1 .2c2.7 32.6 15.9 75.7 26.1 106.3 2.1 6.2 4.2 12.4 5.4 18.8 14.5 76.9-76.8 125.6-131.6 76.1-12.8-11.6-16.9-20.1-33.5-28.4-22.5-11.3-50.7-8.3-69.5 8.4-27.2 24.1-21.1 26.5-59.5 39.2-79.8 4.3-73.9-46.2-121.5-52.2-45.6-5.8-50.3 15.1-77.5 36.1-35.2 27.2-84.3 18.4-110.6-16.5-18.9-25-17.4-49.2-8.7-76.8 11.5-36.6 22-72.8 27.2-111-38.5-2.3-79.3-15.3-100.6-49.9-36.7-59.5 16.7-105.4 58.6-72.5 21 16.5 15.9 17.6 44.4 24.8v-93.7c0-22.1-.5-44.4 1.6-66.4 13.2-139.9 119-240 256.9-252.8zm23.6 708.5c30.9-5.7 33.8-20.9 54.5-36.4 30.4-22.9 71.6-22.9 102.8-1.2 10.4 7.2 15.4 14.5 24 22.7 40.1 38.3 108.1 2.1 97.8-53.3-1.3-6.9-4.1-13.6-6.4-20.3-26.6-76.5-29.4-130.7-29.3-209.3v-91.4c0-22.9 1.4-48.8-1.5-71.4-16.4-126.2-126.7-233.1-256.6-225.5-127.7 2.1-231.5 105.4-244.1 230.7-2.2 22-1.4 44.5-1.4 66.6v113.1c0 75.9-2.9 110.3-26.8 184.7-3.7 11.5-8.9 23.1-8.6 35.5.7 30.3 26.1 57.7 57.3 56.5 29.7-1.1 35.6-16.5 53-32.3 29.2-26.5 86.3-29.7 115.9-2.4 21.1 19.4 31.4 35.3 64.7 34zM223.5 630H238v-35.3c0-6-.6-12.2 0-18.1-17.4-5-33.9-6.8-47.5-19.8-10-9.5-14.1-16.2-29.5-15.3-16.4 4.5-19.3 17.6-14.7 32.8 10.7 36 43.6 49.3 77.2 55.7zm562.9 0c7.5-.4 14.8-1.4 22.1-2.7 24.5-5.9 48.2-16 61.8-38.4 11.8-19.4 13.9-50.3-16.9-47.3-24.1 10.6-26.2 29.9-68 35.1.1 17.7 1.3 35.6 1 53.3z",style:{fill:"#4b4358",stroke:"#4b4358",strokeWidth:14,strokeMiterlimit:10}}),a||(a=n.createElement("path",{d:"M434 487.3c7.6-.6 15.5 0 23.1 0h102.2c31.1-.1 56.6-6.1 51.9 37.7-3.1 28.8-17.6 50.3-39.8 68.1-61.8 43-151.5 7.9-158.7-68-1.6-16.7 1-36.3 21.3-37.8",className:"icon_svg__st1"})),n.createElement("path",{d:"M434 508.9h156c.9 25.2-8.1 46.7-26.9 63.9l-2.6-5c-12.7-24.2-39.2-35.5-65.6-27.2-17.4 5.5-25.8 16.9-33.9 32.3-19.7-15.4-27.6-39.8-27-64",style:{fill:"#f99169"}}),n.createElement("path",{d:"M509.4 559.7c17.8-1.4 29.9 8.1 34.5 25-8.7 3.7-18.9 5.5-28.3 5.8-12.3.3-23.9-1.2-35.3-5.8 4.4-14.4 13.4-23.4 29.1-25",style:{fill:"#d84827"}}),l||(l=n.createElement("path",{d:"M613 333.5c73.3-2 82.6 98.6 10.1 108.8-26.1 5-55.2-18.9-59.4-45-5.3-33.7 16.8-58.7 49.3-63.8M401.7 333.5c73.3-2 82.6 98.6 10.1 108.8-26.1 5-55.2-18.9-59.4-45-5.3-33.7 16.8-58.7 49.3-63.8",className:"icon_svg__st1"})),d||(d=n.createElement("path",{d:"M400.8 333.5c67.3-7.1 88.7 93.9 11.7 108.8-69.1 6-87.1-95.5-11.7-108.8m10.2 86.7c42.1-8.7 34.5-69-8.6-64.5-45.5 9.8-31.5 69.2 8.6 64.5",className:"icon_svg__st1"})),p||(p=n.createElement("path",{d:"M671.4 454.5c11.8-.4 22.8-.4 33.8 4.6 37.2 17 18.4 44.8-13.7 54.2-12.9 1.7-27.8-.1-39.1-6.7-31.7-18.6-11.4-46.3 19-52.1M333.3 454.5c64-3.6 71.4 49.6 20.2 58.8-54.1 6.5-77.4-44.1-20.2-58.8",className:"icon_svg__st4"})),m||(m=n.createElement("ellipse",{cx:638,cy:372.9,className:"icon_svg__st5",rx:17.5,ry:13.4})),_||(_=n.createElement("ellipse",{cx:424.2,cy:372.9,className:"icon_svg__st5",rx:17.5,ry:13.4})))};const u=window.wp.apiFetch;var w=e.n(u);const g=window.wp.data,k={setConditions:{}},v={},x={setState:(e,o)=>({type:"SET_CONDITIONS",conditions:e,setConditions:o}),fetchFromAPI:e=>({type:"FETCH_FROM_API",path:e})},f=(0,g.createReduxStore)("dmwpb-hide-blocks/conditions",{reducer:(e=k,o=v)=>"SET_CONDITIONS"===o.type?{...e,setConditions:o.setConditions}:e,actions:x,selectors:{getConditions(e,o){const{setConditions:t}=e;return t}},controls:{FETCH_FROM_API:e=>w()({path:e.path})},resolvers:{*getConditions(e){const o=yield x.fetchFromAPI("/dmwpb-hide-blocks/v1/block-conditions");return x.setState(e,o)}}});(0,g.register)(f);const y=window.ReactJSXRuntime,C=e=>{const o=e.conditions,[r,c]=(0,n.useState)([...e.attributes.dmwpb__hideBlockConditions]);return e.setAttributes({dmwpb__hideBlockConditions:null!=r?r:[]}),(0,y.jsx)(i.BaseControl,{__nextHasNoMarginBottom:!0,children:o&&o.map(((o,n)=>(0,y.jsxs)(y.Fragment,{children:[0===n&&(0,y.jsx)("div",{class:"components-panel__row dmwpb__row--label",children:(0,y.jsx)("span",{class:"components-base-control__label",children:(0,t.__)("By status","dmwpb-hide-blocks")})}),n>1&&2===n&&(0,y.jsx)("div",{class:"components-panel__row dmwpb__row--label",children:(0,y.jsx)("span",{class:"components-base-control__label",children:(0,t.__)("By role","dmwpb-hide-blocks")})}),(0,y.jsx)(i.PanelRow,{children:(0,y.jsx)(i.CheckboxControl,{__nextHasNoMarginBottom:!0,label:o.name,value:o.role,help:o.help?(0,t.__)(`${o.help}`,"dmwpb-hide-blocks"):void 0,checked:e.attributes.dmwpb__hideBlockConditions.includes(o.role),onChange:e=>{var t,i;t=e,i=o.role,c(t?[...r,i]:r.filter((e=>e!==i)))}})})]})))})},B=["core/paragraph","core/image","core/heading","core/gallery","core/list","core/list-item","core/quote","core/archives","core/audio","core/button","core/buttons","core/calendar","core/categories","core/code","core/column","core/columns","core/cover","core/details","core/embed","core/file","core/group","core/html","core/latest-comments","core/latest-posts","core/media-text","core/missing","core/more","core/nextpage","core/page-list","core/page-list-item","core/pattern","core/preformatted","core/pullquote","core/block","core/rss","core/search","core/separator","core/shortcode","core/social-link","core/social-links","core/spacer","core/table","core/tag-cloud","core/text-columns","core/verse","core/video","core/footnotes","core/navigation","core/navigation-link","core/navigation-submenu","core/site-logo","core/site-title","core/site-tagline","core/query","core/template-part","core/avatar","core/post-title","core/post-excerpt","core/post-featured-image","core/post-content","core/post-author","core/post-author-name","core/post-date","core/post-terms","core/post-navigation-link","core/post-template","core/query-pagination","core/query-pagination-next","core/query-pagination-numbers","core/query-pagination-previous","core/query-no-results","core/read-more","core/comments","core/comment-author-name","core/comment-content","core/comment-date","core/comment-edit-link","core/comment-reply-link","core/comment-template","core/comments-title","core/comments-pagination","core/comments-pagination-next","core/comments-pagination-numbers","core/comments-pagination-previous","core/post-comments-form","core/home-link","core/loginout","core/term-description","core/query-title","core/post-author-biography","core/freeform","core/legacy-widget","core/widget-group"],j={dmwpb__hideBlock:{type:"boolean",default:!1},dmwpb__hideBlockHasConditions:{type:"boolean",default:!1},dmwpb__hideBlockConditions:{type:"array",default:""}};(0,o.addFilter)("editor.BlockEdit","dmwpb-hide-blocks/add-hide-inspector-controls",(function(e){return o=>{if(-1===B.indexOf(o.name))return(0,y.jsx)(e,{...o});const r=wp.data.select("dmwpb-hide-blocks/conditions").getConditions(),n=o.attributes.dmwpb__hideBlockConditions.length;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(e,{...o}),(0,y.jsx)(c.InspectorControls,{children:(0,y.jsxs)(i.PanelBody,{title:"Show/Hide settings",icon:h,initialOpen:!!o.attributes.dmwpb__hideBlock,className:"dmwpb__panel",children:[(0,y.jsx)(i.PanelRow,{children:(0,y.jsx)(i.ToggleControl,{__nextHasNoMarginBottom:!0,label:(0,t.__)("Hide this block?","dmwpb-hide-block"),help:(0,t.__)("Set to true to hide this block on the front-end, but keep it visible in the editor.","dmwpb-hide-block"),checked:o.attributes.dmwpb__hideBlock,onChange:e=>{o.setAttributes({dmwpb__hideBlock:e}),e||(o.setAttributes({dmwpb__hideBlockHasConditions:!1}),o.setAttributes({dmwpb__hideBlockConditions:[]}))}})}),o.attributes.dmwpb__hideBlock&&(0,y.jsx)(i.PanelRow,{children:(0,y.jsx)(i.ToggleControl,{__nextHasNoMarginBottom:!0,label:(0,t.__)("Set visibility conditions","dmwpb-hide-block"),help:(0,t.__)("Choose who to hide this block from.","dmwpb-hide-block"),checked:o.attributes.dmwpb__hideBlockHasConditions,onChange:e=>{o.setAttributes({dmwpb__hideBlockHasConditions:e}),e||o.setAttributes({dmwpb__hideBlockConditions:[]})}})}),o.attributes.dmwpb__hideBlockHasConditions&&(0,y.jsx)(i.PanelRow,{className:"dmwpb__row--conditions",children:(0,y.jsx)(C,{...o,conditions:r})})]})}),(0,y.jsx)(c.BlockControls,{children:(0,y.jsx)(i.ToolbarGroup,{children:o.attributes.dmwpb__hideBlock&&(0,y.jsx)(i.ToolbarButton,{icon:h,label:(0,t.__)("This block is hidden on the front-end"+(n>0?" under "+n+(1===n?" condition.":" conditions."):"."),"dmwpb-hide-block"),"data-active-conditions":n,className:"dmwpb__toolbar-icon dmwpb__hide-icon",disabled:!0})})})]})}}));const M=(0,r.createHigherOrderComponent)((e=>o=>{if(!o.attributes.dmwpb__hideBlock)return(0,y.jsx)(e,{...o});const t={...o.wrapperProps,"data-hidden":!0};return(0,y.jsx)(e,{...o,wrapperProps:t})}),"addDataAttribute");(0,o.addFilter)("editor.BlockListBlock","dmwpb-hide-blocks/add-data-attribute",M),(0,o.addFilter)("blocks.registerBlockType","dmwpb-hide-blocks/add-hide-attributes",(function(e,o){return-1===B.indexOf(o)||(e.attributes={...e.attributes,...j}),e}))})();